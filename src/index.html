<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Island Empire</title>
    <link rel="icon" type="image/x-icon" href="./assets/icons/hoe.png">

    <!-- css -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/hud.css">
    <link rel="stylesheet" href="css/invenotry.css">
    <link rel="stylesheet" href="css/panel.css">
    <link rel="stylesheet" href="css/stats.css">
    
    <script src="js/utils/phaser.min.js"></script>

    <!-- Meta Tags required for Progressive Web App -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> -->
    <link rel="manifest" href="manifest.json">
</head>
<body oncontextmenu="return false">
    <div id="island-empire">
        
    </div>

    <div id="hud">
        <!-- FPS -->
        <div id="fps"></div>
        <!-- Action Button -->
        <button id="action-btn">
            <img id="action-btn-icon" src="./assets/icons/sword.png"></img>
        </button>
        <!-- Player Stats -->
        <div id="stats-container">
            <div id="hunger-thirst-container">
                <div id="hunger-bar-container">
                    <img src="assets/icons/stats/hunger.png" alt="" id="hunger-bar-icon">
                    <div id="hunger-bar">
                        <div class="bar-background"></div>
                        <div class="bar-foreground">
                            <div id="hunger-bar-current"></div>
                        </div>
                        <div id="hunger-bar-value" class="bar-value">100/100</div>
                    </div>
                </div>
                <div id="thirst-bar-container">
                    <img src="assets/icons/stats/thirst.png" alt="" id="thirst-bar-icon">
                    <div id="thirst-bar">
                        <div class="bar-background"></div>
                        <div class="bar-foreground">
                            <div id="thirst-bar-current"></div>
                        </div>
                        <div id="thirst-bar-value" class="bar-value">100/100</div>
                    </div>
                </div>
            </div>
            <div id="health-bar-container">
                <!-- <img src="assets/icons/stats/health.png" alt="" id="health-bar-icon"> -->
                <div id="health-bar">
                    <div class="bar-background"></div>
                    <div class="bar-foreground">
                        <div id="health-bar-current"></div>
                    </div>
                    <div id="health-bar-value" class="bar-value">100/100</div>
                </div>
            </div>
        </div>
        <!-- Construction -->
        <div id="construction-container">
            <!-- <button id="placement-btn" class="construct-action-btns active">Placement</button>
            <button id="removal-btn" class="construct-action-btns">Removal</button> -->
            <div id="construction-confirmation-btns-container">
                <button id="construction-confirm-btn" class="construct-action-btns">confirm</button>
                <button id="construction-cancel-btn" class="construct-action-btns">Cancel</button>
            </div>
            <div id="construction-item-container">
                <div id="construction-item-list"></div>
            </div>
        </div>

        <!-- Inventory Slots-->
        <!-- <div id="inventory-slots-container">
        </div> -->

        <!-- Collectables -->
        <div id="collectables-container">
            <!-- <button class="collectable-btn">
                <img src="" alt="" class="collectable-img">
                <div class="collectable-name">Wood</div>
            </button> -->
        </div>
        <!-- Player Status -->
        <div id="player-status-container">
            <div id="hp-mp-container">
                <div id="hp-container">
                    
                </div>
            </div>
        </div>
        <!-- UIs -->
        <div class="ui-container">
            <button id="shop-ui" class="ui-btn"><img src="assets/icons/shop.png" alt="" class="ui-img"></button>
            <button id="inventory-ui" class="ui-btn"><img src="assets/icons/inventory.png" alt="" class="ui-img"></button>
            <button id="construction-ui" class="ui-btn"><img src="assets/icons/construction.png" alt="" class="ui-img"></button>
            <button id="exit-ui" class="ui-btn"><img src="assets/icons/exit.png" alt="" class="ui-img"></button>
        </div>
        <!-- <button id="install-ui">Install</button> -->
         <!-- Inventory -->
        
         <div id="inventory-container" class="panel-container">
            <div id="inventory-header" class="panel-header">
                <div id="inventory-tag" class="panel-tag">Inventory</div>
                <div id="inventory-category-container" class="panel-category-container">
                    <img id="inventory-category-weapon" class="panel-category-element" src="assets/icons/panel/weapon-icon-light.png" data-category="weapon" ></img>
                    <img id="inventory-category-material" class="panel-category-element" src="assets/icons/panel/material-icon-light.png" data-category="material" ></img>
                    <img id="inventory-category-consumable" class="panel-category-element" src="assets/icons/panel/consumable-icon-light.png" data-category="consumable" ></img>
                    <img id="inventory-category-farming" class="panel-category-element" src="assets/icons/panel/farming-icon-light.png" data-category="farming" ></img>
                    <img id="inventory-category-construction" class="panel-category-element" src="assets/icons/panel/construction-icon-light.png" data-category="construction" ></img>
                </div>
                <img src="assets//icons/panel/exit-btn.png" id="inventory-exit-btn" class="panel-exit-btn"></img>
            </div>
            <div id="inventory-body" class="panel-body">
                <div id="inventory-list" class="panel-list"></div>
                <div id="inventory-detail" class="panel-detail"></div>
            </div>
         </div>
        <!-- Shop -->
        <div id="shop-container">
            <div id="shop-header">
                <div id="shop-name">Shop</div>
                <div id="shop-exit-btn">X</div>
            </div>
            <div id="shop-content">
                <div id="shop-item-list">
                    <!-- <div class="shop-item">
                        <img src="" alt="" class="shop-item-img">
                        <div class="shop-item-descriptions">
                            <div class="shop-item-descriptions-name">Wood</div>
                            <div class="shop-item-descriptions-price">10 coins</div>
                        </div>
                        <div class="shop-item-limit">Unlimited</div>
                    </div>
                    <div class="shop-item"></div> -->
                </div>
                <div id="shop-item-info-wrapper">
                    <div id="shop-item-info" class="panel-detail">
                        <div id="shop-item-info-header" class="panel-detail-header">Wood</div>
                        <div id="shop-item-info-img-container" class="panel-detail-body">
                            <div id="shop-item-info-category" class="panel-detail-body-type">Resource</div>
                            <img src="" alt="" id="shop-item-info-img" class="panel-detail-body-img">
                        </div>
                        <div id="shop-item-info-description" class="panel-detail-descriptions">some descriptions</div>
                        <div id="shop-item-info-owned" class="panel-detail-owned">Owned: 20</div>
                    </div>
                </div>
            </div>
            <div id="shop-footer">
                <button id="shop-purchase-btn" class="btn">Phurchase</button>
            </div>
            <!-- shop-quantity-window -->
            <div id="shop-quantity-window">
                <div id="shop-quantity-wrapper">
                    <div id="shop-quantity-title">Item to purchase</div>
                    <div id="shop-quantity-img-container">
                        <img src="" alt="" id="shop-quantity-img">
                    </div>
                    <div id="shop-quantity-quantity">
                        <div id="shop-quantity-quantity-text">Qty.</div>
                        <div id="shop-quantity-quantity-value">1</div>
                    </div>
                    <div id="shop-quantity-selector">
                        <button id="shop-quantity-decrease-btn" class="adjust-quantity-btn">-</button>
                        <div id="shop-quantity-min-text">1</div>
                        <input type="range" id="shop-quantity-range" name="shop-quantity-range" min="1" max="100" value="1" step="" />
                        <div id="shop-quantity-max-text">100</div>
                        <button id="shop-quantity-increase-btn" class="adjust-quantity-btn">+</button>
                    </div>
                    <div id="shop-quantity-cost">Cost: 10 coin</div>
                    <hr>
                    <div id="shop-quantity-btns">
                        <button id="shop-quantity-cancel-btn" class="btn">Cancel</button>
                        <button id="shop-quantity-confirm-btn" class="btn">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        window.addEventListener('load', () => {
            registerSW();
        });
        
        // Register the Service Worker
        async function registerSW() {
            if ('serviceWorker' in navigator) {
                try {
                    await navigator
                        .serviceWorker
                        .register('sw.js');
                    
                    console.log("SW registation succeed")
                }
                catch (e) {
                    console.log(e)
                    console.log('SW registration failed');
                }
            }
        }
    </script>
    <script src="sw.js"></script>
    <script type="module" src="js/index.js"></script>

</body>
</html>